<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About - Погода</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="mstyle.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Quicksand&amp;display=swap"
    />
    <link
      rel="shortcut icon"
      href="./assets/icons/favicon.svg"
      type="image/x-icon"
    />
    <script src="./js/icon.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <header>
      <a href="https://www.voenmeh.ru/" class="logo">
        <i class="fal fa-sun fa-3x"></i>
        <h4>&nbsp;Погода</h4>
      </a>

      <div class="navMain">
        <button class="openbtn" onclick="openNav()">&#9776;</button>
      </div>

      <div class="nav">
        <div id="mySidepanel" class="sidebar">
          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
            >&times;
          </a>
          <ul>
            <li>
              <a href="index.html">Главная</a>
              <a class="active" href="about.html">Информация</a>
            </li>
          </ul>
        </div>
      </div>
    </header>

    <div class="contain">
      <div class="intro">
        <p>
        
#include <stdio.h><br />
#include <stdlib.h><br />
#include <string.h><br />
#include <locale.h><br />

struct car<br />
{<br />
    int year; // Ð³Ð¾Ð´ Ð²Ñ‹Ð¿ÑƒÑÐºÐ°<br />
    int price; // Ñ†ÐµÐ½Ð° Ð°Ð²Ñ‚Ð¾<br />
    int quantity; // ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð°Ð²Ñ‚Ð¾<br />
    char brand[20]; // Ð¼Ð°Ñ€ÐºÐ° Ð°Ð²Ñ‚Ð¾<br />
    char country[20]; // ÑÑ‚Ñ€Ð°Ð½Ð°-Ð¸Ð·Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÐµÐ»ÑŒ<br />
    float engine_capacity; // Ð¾Ð±ÑŠÐµÐ¼ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»Ñ<br />
    float gasoline_consumption; // Ñ€Ð°ÑÑ…Ð¾Ð´ Ñ‚Ð¾Ð¿Ð»Ð¸Ð²Ð° Ð½Ð° 100 ÐºÐ¼<br />
};<br />
<br />
struct car input_car (void);<br />

void add (char *); // Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² Ñ„Ð°Ð¹Ð»<br />
void del (char *); // ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°<br />
void edit (char *); // Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ<br />
void show (char *); // Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ñ„Ð°Ð¹Ð»Ð°<br />
void change (char *); // Ð½Ð°Ð¹Ñ‚Ð¸ ÑÐ²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ðµ<br />
void search (char * file);<br />
<br />

int main (int argc, char * argv[])<br />
{<br />
    int menu;<br />
    char filename[100];<br />

    if (argc > 1)<br />
        strcpy(filename, argv[1]);<br />
    else<br />
    {<br />
        printf("Enter file name : ");<br />
        gets(filename);<br />
    }<br />

    do<br />
    {<br />
        puts("--------------------------------------------------------------------------------------------------");<br />
        puts("|1.| Adding a record.                                                                            |");<br />
        puts("|2.| Editing the record.                                                                         |");<br />
        puts("|3.| Viewing records.                                                                            |");<br />
        puts("|4.| Car price change.                                                                           |");<br />
        puts("|5.| Searching for a car brand with a certain engine volume and the lowest gasoline consumption. |");<br />
        puts("|6.| Delete a record.                                                                            |");<br />
        puts("|7.| Exit.                                                                                       |");<br />
        puts("--------------------------------------------------------------------------------------------------");<br />
        printf("Select the number of operation : ");<br />
        scanf("%d%*c", &menu);<br />

        switch (menu)<br />
        {<br />
            case 1 : add (filename); break;<br />
            case 2 : edit (filename); break;<br />
            case 3 : show (filename); break;<br />
            case 4 : change (filename); break;<br />
            case 5 : search (filename); break;<br />
            case 6 : del (filename); break;<br />
        }<br />
    }<br />
    while (menu != 7);<br />
    return 0;<br />
}<br />

struct car input_car (void)<br />
{<br />
    struct car machine;<br />
    printf("Next, you need to enter the machine data.\n");<br />
    printf("-------------------------------------------\n");<br />
    printf("Brand : ");<br />
    scanf("%s", machine.brand);<br />
    printf("Auto-producing country : ");<br />
    scanf("%s", machine.country);<br />
    printf("Year of car production : ");<br />
    scanf("%d", &machine.year);<br />
    printf("Engine capacity : ");<br />
    scanf("%f", &machine.engine_capacity);<br />
    printf("Fuel consumption per 100 km.: ");<br />
    scanf("%f", &machine.gasoline_consumption);<br />
    printf("Car price ($) : ");<br />
    scanf("%d", &machine.price);<br />
    printf("Quantity of cars instances : ");<br />
    scanf("%d", &machine.quantity);<br />
    printf("-------------------------------------------\n");<br />
    return machine;<br />
}<br />

void add (char * file) // Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² Ñ„Ð°Ð¹Ð»<br />
{<br />
    FILE * f;<br />
    struct car machine;<br />

    // Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑƒÑ‚<br />
    if ((f = fopen(file,"ab")) == NULL)<br />
    {<br />
        perror("\nFile open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />
    machine = input_car();<br />
    fwrite(&machine, sizeof(machine), 1, f);<br />
    printf("The car was successfully added. Press 'Enter' to continue.\n");<br />
    getchar();<br />
    getchar();<br />
    fclose(f);<br />
}<br />

void print (struct car data) // Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð½Ð° ÑÐºÑ€Ð°Ð½ Ð¾Ð´Ð½Ð¾Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ¸<br />
{<br />
    printf("-------------------------------------------\n");<br />
    printf("Brand : %s\nAuto-producing country : %s\nYear of car production : %d\nEngine capacity : %f\nFuel consumption per 100 km.: %f\nCar price ($): %d\nQuantity of cars instances : %d\n", data.brand, data.country, data.year, data.engine_capacity, data.gasoline_consumption, data.price, data.quantity);<br />
    printf("-------------------------------------------\n");<br />
}<br />

void edit (char * file) // Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸<br />
{<br />
    FILE * f;<br />
    struct car machine;<br />
    char brand[20], yes;<br />

    // Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑƒÑ‚<br />
    if ((f = fopen(file,"rb+")) == NULL)<br />
    {<br />
        perror("\nFile open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />

    printf("\nWrite the brand of the car whose data you want to edit : ");<br />
    gets(brand);<br />

    while (fread(&machine, sizeof(machine), 1, f))<br />
        if (!strcmp(machine.brand, brand))<br />
        {<br />
            print(machine);<br />
            printf("If you want to edit a record write 'y', otherwise write 'n'\n");<br />
            do<br />
            {<br />
                yes = getchar();<br />
                getchar();<br />
            }<br />
            while ((yes != 'y') && (yes != 'n'));<br />
            if (yes == 'y')<br />
            {<br />
                machine = input_car();<br />
                fseek(f, -sizeof(machine), SEEK_CUR);<br />
                fwrite(&machine, sizeof(machine), 1, f);<br />
                fseek (f, 0, SEEK_CUR);<br />
            }<br />
        }<br />

    printf("The editing is comlete. Press 'Enter' to continue.\n");<br />
    fclose(f);<br />
    getchar();<br />
    getchar();<br />
}<br />

void show (char * file) // Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿ÐµÑ‡Ð°Ñ‚Ð¸ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°<br />
{<br />
    FILE * f;<br />
    int k = 0;<br />
    struct car machine;<br />

    // Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑƒÑ‚<br />
    if ((f = fopen(file,"rb")) == NULL)<br />
    {<br />
        perror ("\nFile open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />
    puts("\n---------------------------------------------------------------------------------------------------------------------------------------------");<br />
    puts("| N |        Brand       |  Auto-producing country  | Year | Engine capacity | Fuel consump. per 100 km. |       Car price       | Quantity |");<br />
    puts("---------------------------------------------------------------------------------------------------------------------------------------------");<br />
    while (fread(&machine, sizeof(machine), 1, f) == 1)<br />
        printf("| %d | %18s | %24s | %4d | %15f | %25f | %21d | %8d |\n", ++k, machine.brand, machine.country, machine.year, machine.engine_capacity, machine.gasoline_consumption, machine.price, machine.quantity );<br />
    puts("---------------------------------------------------------------------------------------------------------------------------------------------");<br />
    fclose(f);<br />
    printf("Press 'Enter' to continue.\n");<br />
    getchar();<br />
}<br />

void change (char * file) // Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ†Ð¸Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾ Ð¼Ð°ÑˆÐ¸Ð½Ðµ, Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ñ†ÐµÐ½Ñ‹<br />
{<br />
    FILE * f;<br />
    float new_price = 0;<br />
    char yes, brand[100];<br />
    struct car machine, automobile;<br />

    // Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑƒÑ‚<br />
    if ((f = fopen(file,"rb+")) == NULL)<br />
    {<br />
        perror ("\nFile open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />

    printf("\nWrite the brand of the car whose data you want to edit : ");<br />
    gets(brand);<br />

    while (fread(&machine, sizeof(machine), 1, f))<br />
        if (!strcmp(machine.brand, brand))<br />
        {<br />
            print(machine);<br />
            printf("If you want to change the price write 'y', otherwise write 'n' : ");<br />
            do<br />
            {<br />
                yes = getchar();<br />
                getchar();<br />
            }<br />
            while ((yes != 'y') && (yes != 'n'));<br />
            if (yes == 'y')<br />
            {<br />
                printf("Enter the new price : ");<br />
                scanf("%f", &new_price);<br />
                machine.price = new_price;<br />
                automobile = machine;<br />
                fseek(f, -sizeof(machine), SEEK_CUR);<br />
                fwrite(&machine, sizeof(machine), 1, f);<br />
                fseek (f, 0, SEEK_CUR);<br />
                print(automobile);<br />
            }<br />
        }<br />
    puts("The change is comlete. Press 'Enter' to continue.\n");<br />
    fclose(f);<br />
    getchar();<br />
    getchar();<br />
}<br />

void search (char * file)<br />
{<br />
    FILE * f;<br />
    float v = 0, min = 1000;<br />
    struct car machine;<br />

    // Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑƒÑ‚<br />
    if ((f = fopen(file,"rb")) == NULL)<br />
    {<br />
        perror ("\nFile open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />

    printf("Enter engine capacity : ");<br />
    scanf("%f", &v);<br />

    while(fread(&machine, sizeof(machine), 1, f) == 1)<br />
        if((machine.engine_capacity == v) && (machine.gasoline_consumption < min))<br />
        {<br />
            min = machine.gasoline_consumption;<br />
        }<br />
    if(min != 1000)<br />
    {<br />
        printf("-------------------------------------------\n");<br />
        printf("Brand : %s\nFuel consumption per 100 km.: %f\n", machine.brand, machine.gasoline_consumption);<br />
        printf("-------------------------------------------\n");<br />
    }<br />
    else<br />
        printf("The car with this engine capacity wasn't found. ");<br />
    fclose (f);<br />
    printf("Press 'Enter' to continue.\n");<br />
    getchar();<br />
    getchar();<br />
}<br />

void del (char * file) // Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°<br />
{<br />
    FILE *f1, *f2;<br />
    struct car machine;<br />
    unsigned long n, n_file, i = 0;<br />

    // Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ‚ÑƒÑ‚<br />
    if ((f1 = fopen(file, "rb+")) == NULL) {<br />
        perror("\nFile open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />

    fseek(f1, 0, SEEK_END);<br />
    n_file = ftell(f1) / sizeof(machine);<br />

    if (n_file == 0) {<br />
        puts("File is free. Press 'Enter' to continue\n");<br />
        getchar();<br />
        return;<br />
    }<br />

    puts("What's the number of the deleted record?");<br />
    scanf("%lu", &n);<br />

    if (n > n_file) {<br />
        puts("Incorrect number. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        getchar();<br />
        fclose(f1);<br />
        return;<br />
    }<br />

    rewind(f1);<br />
    if ((f2 = fopen("4.txt", "wb+")) == NULL) {<br />
        perror("File open error. Press 'Enter' to continue.\n");<br />
        getchar();<br />
        return;<br />
    }<br />

    while (fread(&machine, sizeof(machine), 1, f1) == 1) {<br />
        i++;<br />
        if (i != n)<br />
            fwrite(&machine, sizeof(machine), 1, f2);<br />
    }<br />

    fclose(f1);<br />
    fclose(f2);<br />
    remove(file);<br />
    rename("temp.txt", file);<br />
    puts("Record deleted. Press 'Enter' to continue.\n");<br />
    getchar();<br />
    getchar();<br />
}<br />

        </p>
        <a href="https://www.voenmeh.ru/" target="_blank">
          <i class="fab fa-github fa-2x"></i>
          <h2>&nbsp;Военмех</h2>
        </a>
      </div>
    </div>

    <footer class="footerA">
      <p>&#169; Работа по Практике Палёнова Александра И508Б</p>
    </footer>

    <div class="abgimg">
      <img src="assets/about.jpg" alt="weather-img" scroll="no" />
    </div>

    <script src="./js/nav.js"></script>
  </body>
</html>
